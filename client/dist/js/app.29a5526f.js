(function(e){function t(t){for(var n,s,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,r,o=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("div",{staticClass:"d-flex align-center"},[a("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),a("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Vuetify Name",contain:"","min-width":"100",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-name-dark.png",width:"100"}})],1),a("v-spacer"),e.isUserLoggedIn?a("v-btn",{attrs:{text:""},on:{click:e.logout}},[a("span",{staticClass:"mr-2"},[e._v("Logout")]),a("v-icon",[e._v("mdi-open-in-new")])],1):e._e()],1),e.isUserLoggedIn?a("v-main",[a("TodoList",{attrs:{updateUserStatus:e.updateUserStatus}})],1):a("v-main",[e.shouldShowLogin?a("Login",{attrs:{loginHandler:e.loginHandler,handleShowRegister:e.handleShowRegister}}):e._e(),e.shouldShowRegister?a("Register",{attrs:{loginHandler:e.loginHandler,handleShowLogin:e.handleShowLogin}}):e._e()],1)],1)},i=[],l=(a("96cf"),a("1da1")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"teal",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Login form")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Login",name:"login","prepend-icon":"mdi-account",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("a",{on:{click:e.handleShowRegister}},[e._v("Don't have an account? Create one now!")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.submitLogin}},[e._v("Login")])],1)],1)],1)],1)],1)],1)},u=[],d=(a("99af"),a("bc3a")),p=a.n(d),m="userData",v={data:function(){return{URL:""}},methods:{saveInLocal:function(e,t){localStorage.setItem(e,JSON.stringify(t))},readFromLocal:function(e){var t=localStorage.getItem(e);return"null"!==t?JSON.parse(t):null},saveUserData:function(e){this.saveInLocal(m,e)},readUserData:function(){return this.readFromLocal(m)},isUserLoggedInInStorage:function(){return!!this.readUserData()},userToken:function(){return this.isUserLoggedInInStorage()?this.readUserData().token:null},handleError:function(e){var t=e.response.status;401===t&&(localStorage.removeItem(m),this.updateUserStatus&&this.updateUserStatus(!1)),console.error(e)},apiLogin:function(e){return p.a.post("".concat(this.URL,"/users/login"),e)},apiRegister:function(e){return p.a.post("".concat(this.URL,"/users"),e)},apiLogout:function(){return console.log("logging out",this.userToken()),p.a.post("".concat(this.URL,"/users/logoutAll"),null,{headers:{Authorization:"Bearer "+this.userToken()}})},apiGetProfile:function(){return p.a.get("".concat(this.URL,"/users/me"),{headers:{Authorization:"Bearer "+this.userToken()}})},apiGetTasks:function(){return p.a.get("".concat(this.URL,"/tasks"),{headers:{Authorization:"Bearer "+this.userToken()}})},apiUpdateTasks:function(e,t){return p.a.patch("".concat(this.URL,"/tasks/").concat(e),t,{headers:{Authorization:"Bearer "+this.userToken()}})},apiCreateTasks:function(e){return p.a.post("".concat(this.URL,"/tasks/"),e,{headers:{Authorization:"Bearer "+this.userToken()}})},apiDeleteTasks:function(e){return p.a.delete("".concat(this.URL,"/tasks/").concat(e),{headers:{Authorization:"Bearer "+this.userToken()}})}}},h=v,g=a("2877"),f=Object(g["a"])(h,n,r,!1,null,null,null),w=f.exports,k={name:"Login",mixins:[w],props:{loginHandler:{type:Function},handleShowRegister:{type:Function}},data:function(){return{email:"",password:""}},mounted:function(){},methods:{submitLogin:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("SUBMITTING FORM",e.email,e.password),t.prev=1,t.next=4,e.apiLogin({email:e.email,password:e.password});case 4:a=t.sent,n=a.data,console.log("login",n),e.saveUserData(n),e.loginHandler(!0),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()}}},b=k,x=a("6544"),T=a.n(x),V=a("8336"),L=a("b0af"),y=a("99d9"),R=a("62ad"),S=a("a523"),_=a("4bd4"),C=a("f6c4"),U=a("0fd9"),I=a("2fa4"),M=a("8654"),O=a("71d9"),j=a("2a7f"),D=Object(g["a"])(b,c,u,!1,null,null,null),A=D.exports;T()(D,{VBtn:V["a"],VCard:L["a"],VCardActions:y["a"],VCardText:y["b"],VCol:R["a"],VContainer:S["a"],VForm:_["a"],VMain:C["a"],VRow:U["a"],VSpacer:I["a"],VTextField:M["a"],VToolbar:O["a"],VToolbarTitle:j["a"]});var N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"teal",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Register form")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Name",name:"name","prepend-icon":"mdi-account",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{label:"Email",name:"login","prepend-icon":"mdi-email",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{label:"Age",name:"age","prepend-icon":"mdi-baby-carriage",type:"text",min:"18"},model:{value:e.age,callback:function(t){e.age=t},expression:"age"}})],1),a("a",{on:{click:e.handleShowLogin}},[e._v("Already have an account? Login now!")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.submitLogin}},[e._v("Register")])],1)],1)],1)],1)],1)],1)},B=[],F=(a("b0c0"),{name:"Register",mixins:[w],props:{loginHandler:{type:Function},handleShowLogin:{type:Function}},data:function(){return{email:"",name:"",password:"",age:null}},mounted:function(){},methods:{submitLogin:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("SUBMITTING FORM",e.email,e.password),t.prev=1,t.next=4,e.apiRegister({email:e.email,name:e.name,age:e.age,password:e.password});case 4:a=t.sent,n=a.data,console.log("login",n),e.saveUserData(n),e.loginHandler(!0),e.handleShowLogin(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()}}}),E=F,P=Object(g["a"])(E,N,B,!1,null,null,null),H=P.exports;T()(P,{VBtn:V["a"],VCard:L["a"],VCardActions:y["a"],VCardText:y["b"],VCol:R["a"],VContainer:S["a"],VForm:_["a"],VMain:C["a"],VRow:U["a"],VSpacer:I["a"],VTextField:M["a"],VToolbar:O["a"],VToolbarTitle:j["a"]});var $=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"5"}},[a("v-card",{staticClass:"mx-auto"},[a("v-toolbar",{attrs:{color:"teal",dark:""}},[a("v-icon",[e._v("mdi-format-list-checks")]),a("v-toolbar-title",{staticClass:"ml-2"},[e._v("Task Manager")])],1),a("v-list",{attrs:{subheader:"","two-line":"",flat:""}},[a("v-subheader",[a("v-spacer"),a("v-btn",{staticClass:"mt-2 white",attrs:{color:"green",title:"Create new task"},on:{click:e.openNewTaskModal}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("mdi-plus")]),e._v("New ")],1)],1),a("v-divider",{staticClass:"mt-4"}),a("v-list-item-group",{attrs:{multiple:""},model:{value:e.settings,callback:function(t){e.settings=t},expression:"settings"}},e._l(e.tasks,(function(t){return a("v-list-item",{key:t._id},[a("v-list-item-action",[a("v-checkbox",{attrs:{color:"primary"},on:{click:function(a){return e.toggleTask(t._id,a)}},model:{value:t.completed,callback:function(a){e.$set(t,"completed",a)},expression:"task.completed"}})],1),a("v-list-item-content",[a("v-list-item-title",{class:t.completed?"deleted":""},[e._v(e._s(t.description))]),a("v-list-item-subtitle",[e._v(e._s(e.formatDate(t.createdAt)))])],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:"",color:"red",title:"Remove Task"},on:{click:function(a){return e.deleteTask(t._id)}}},[a("v-icon",[e._v("mdi-trash-can-outline")])],1)],1)],1)})),1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.newTaskModal,callback:function(t){e.newTaskModal=t},expression:"newTaskModal"}},[a("v-card",[a("v-card-title",{staticClass:"headline teal lighten-2"},[e._v("Create new task")]),a("v-card-text",[a("v-form",{ref:"form"},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"New Task",rules:[e.rules.minLength,e.rules.maxLength],outlined:""},model:{value:e.newTask,callback:function(t){e.newTask=t},expression:"newTask"}})],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeNewTaskModal}},[e._v("Close")]),a("v-btn",{attrs:{color:"primary",disabled:e.shouldSaveBeDisabled},on:{click:e.createNewTask}},[e._v("Create new task")])],1)],1)],1)],1)],1)},z=[],G=(a("c740"),a("fb6a"),a("2909")),J={name:"TodoList",mixins:[w],props:{updateUserStatus:{type:Function}},data:function(){return{settings:[],tasks:[],newTaskModal:!1,newTask:"",rules:{minLength:function(e){return!!e&&e.length>=4||"Min 4 characters"},maxLength:function(e){return!!e&&e.length<=30||"Max 30 characters"}}}},computed:{shouldSaveBeDisabled:function(){return!this.newTask||!this.minValidation(this.newTask)||!this.maxValidation(this.newTask)}},watch:{newTaskModal:function(){this.newTaskModal||this.resetValidation()}},mounted:function(){this.getData()},methods:{minValidation:function(e){return e.length>=4},maxValidation:function(e){return e.length<=30},getData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.apiGetTasks();case 3:a=t.sent,n=a.data,e.tasks=n,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.handleError(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},toggleTask:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.stopPropagation(),r=Object(G["a"])(a.tasks),o=r.findIndex((function(t){var a=t._id;return a===e})),r[o].completed=!r[o].completed,a.tasks=r,n.prev=5,n.next=8,a.apiUpdateTasks(e,{completed:r[o].completed});case 8:n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](5),a.handleError(n.t0);case 13:case"end":return n.stop()}}),n,null,[[5,10]])})))()},formatDate:function(e){return e.slice(0,10)},openNewTaskModal:function(){this.newTaskModal=!0},closeNewTaskModal:function(){this.newTaskModal=!1,this.newTask=""},createNewTask:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.apiCreateTasks({description:e.newTask});case 3:e.getData(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.handleError(t.t0);case 9:return t.prev=9,e.closeNewTaskModal(),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))()},resetValidation:function(){this.$refs.form.resetValidation()},deleteTask:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.apiDeleteTasks(e);case 3:t.getData(),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),t.handleError(a.t0);case 9:return a.prev=9,t.closeNewTaskModal(),a.finish(9);case 12:case"end":return a.stop()}}),a,null,[[0,6,9,12]])})))()}}},q=J,K=(a("ed30"),a("ac7c")),Q=a("169a"),W=a("ce7e"),X=a("132d"),Y=a("8860"),Z=a("da13"),ee=a("1800"),te=a("5d23"),ae=a("1baa"),ne=a("e0c7"),re=Object(g["a"])(q,$,z,!1,null,null,null),oe=re.exports;T()(re,{VBtn:V["a"],VCard:L["a"],VCardActions:y["a"],VCardText:y["b"],VCardTitle:y["c"],VCheckbox:K["a"],VCol:R["a"],VContainer:S["a"],VDialog:Q["a"],VDivider:W["a"],VForm:_["a"],VIcon:X["a"],VList:Y["a"],VListItem:Z["a"],VListItemAction:ee["a"],VListItemContent:te["a"],VListItemGroup:ae["a"],VListItemSubtitle:te["b"],VListItemTitle:te["c"],VMain:C["a"],VRow:U["a"],VSpacer:I["a"],VSubheader:ne["a"],VTextField:M["a"],VToolbar:O["a"],VToolbarTitle:j["a"]});var se={name:"App",components:{Login:A,Register:H,TodoList:oe},mixins:[w],data:function(){return{isUserLoggedIn:!1,showRegister:!1}},computed:{shouldShowLogin:function(){return!this.isUserLoggedIn&&!this.showRegister},shouldShowRegister:function(){return!this.isUserLoggedIn&&this.showRegister}},mounted:function(){this.isUserLoggedIn=this.isUserLoggedInInStorage()},methods:{logout:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("logging out from App"),t.prev=1,t.next=4,e.apiLogout();case 4:a=t.sent,n=a.data,console.log("logout",n),e.isUserLoggedIn=!1,e.saveUserData(null),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.handleError(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()},loginHandler:function(e){this.isUserLoggedIn=e},handleShowRegister:function(){this.showRegister=!0},handleShowLogin:function(){this.showRegister=!1},updateUserStatus:function(e){this.isUserLoggedIn=e}}},ie=se,le=a("7496"),ce=a("40dc"),ue=a("adda"),de=Object(g["a"])(ie,s,i,!1,null,null,null),pe=de.exports;T()(de,{VApp:le["a"],VAppBar:ce["a"],VBtn:V["a"],VIcon:X["a"],VImg:ue["a"],VMain:C["a"],VSpacer:I["a"]});var me=a("f309");o["a"].use(me["a"]);var ve=new me["a"]({theme:{dark:!0}});o["a"].config.productionTip=!1,new o["a"]({vuetify:ve,render:function(e){return e(pe)}}).$mount("#app")},"89d2":function(e,t,a){},ed30:function(e,t,a){"use strict";var n=a("89d2"),r=a.n(n);r.a}});
//# sourceMappingURL=app.29a5526f.js.map